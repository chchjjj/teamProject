<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.example.teamProject.mapper.MainMapper">

	<!-- 메인페이지 / 상품리스트 조회 -->
	<select id="selectMainProList" parameterType="hashmap" resultType="com.example.teamProject.main.model.Main">
		SELECT *			
		FROM PRODUCT_TBL P
		INNER JOIN SELLER_INFO_TBL S
		ON P.STORE_ID = S.STORE_ID
		WHERE 1=1	
		<if test="area != '' and area !=null">	<!--area가 빈값이나 null이 아닐 때-->
			AND STORE_AREA = #{area} 
			<!--내가 area값으로 보낸 (선택한) 지역 값이 들어가면 그 내역만 나오게! -->	
			<!--빈값이면 일단 전체 목록 다 나오도록 -->							
		</if>
		
		<if test="order == 1"> 
			ORDER BY P.CNT DESC <!--조회순 정렬-->
		</if>
		
		<if test="order == 2">
			ORDER BY P.SELL_COUNT DESC <!--판매순 정렬-->
		</if>		
		
		<if test="order == 3">
			ORDER BY CREATED_AT DESC <!--최신순 정렬-->
		</if>
		
	</select>
</mapper>
